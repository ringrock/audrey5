[tool:pytest]
# Configuration pytest pour les tests fonctionnels AskMe

# Répertoires de tests
testpaths = tests

# Patterns de fichiers de tests
python_files = test_*.py *_test.py

# Patterns de classes de tests
python_classes = Test*

# Patterns de méthodes de tests
python_functions = test_*

# Markers personnalisés
markers =
    language: Tests de langue et localisation
    search: Tests Azure AI Search avec citations
    response_length: Tests de longueur de réponse
    document_count: Tests de nombre de documents
    image: Tests d'analyse d'images
    e2e: Tests End-to-End avec Playwright
    e2e_image: Tests E2E pour upload d'images
    e2e_chat: Tests E2E pour interactions chat
    e2e_slow: Tests E2E lents (peuvent prendre du temps)
    slow: Tests lents (peuvent prendre du temps)
    integration: Tests d'intégration
    unit: Tests unitaires
    functional: Tests fonctionnels

# Options par défaut
addopts = 
    --strict-markers
    --tb=short
    --disable-warnings
    --color=yes
    -ra

# Timeout pour les tests async (en secondes)
asyncio_mode = auto
timeout = 300

# Filtres de warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Variables d'environnement pour les tests
env =
    TESTING = true
    LOG_LEVEL = INFO